<c-card class="mb-4">
    <c-card-header ngPreserveWhitespaces>
        <strong>Search for Track(s)</strong>
    </c-card-header>
    <c-card-body>
        <p class="text-medium-emphasis small">
            Enter a search value below to search for track(s) by
            <code>&lt;Title&gt;</code> or <code>&lt;Album&gt;</code> or <code>&lt;Artist&gt;</code> or <code>&lt;Genre(s)&gt;</code>
        </p>
        <form cForm class="row row-cols-lg-auto g-3 align-items-center">
            <c-col xs="12">
                <label cLabel class="visually-hidden" for="searchText">
                    searchText
                </label>
                <c-input-group>
                    <span cInputGroupText><fa-icon [icon]="faMagnifyingGlass"></fa-icon></span>
                    <input cFormControl id="searchText" autocomplete="off" placeholder="Search value" [(ngModel)]="searchText" name="searchText"/>
                </c-input-group>
            </c-col>
            <c-col xs="12">
                <button cButton type="button" (click)="searchTracks()" [disabled]="!searchText.trim()">Search</button>
            </c-col>
            <c-col xs="12">
                <button cButton type="button" color="secondary" (click)="reset()" >Reset</button>
            </c-col>
        </form>
        <span class="col col-form-label mt-3" *ngIf="paginateSortService.loading$ | async"> <c-spinner size="sm"></c-spinner> Loading...</span>
        <table class="table table-striped mt-3">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col" sortable="title" (sort)="onSort($event)">Title</th>
                <th scope="col" sortable="artistName" (sort)="onSort($event)">Artist</th>
                <th scope="col" sortable="albumTitle" (sort)="onSort($event)">Album</th>
                <th scope="col" >Genre(s)</th>
                <th scope="col" >Action</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let track of trackList$ | async; let index = index;">
                <th scope="row">{{ index + 1 }}</th>
                <td>
                    <ngb-highlight [result]="track.title" [term]="paginateSortService.searchTerm"></ngb-highlight>
                </td>
                <td>
                    <ngb-highlight [result]="track.artistName" [term]="paginateSortService.searchTerm"></ngb-highlight>
                </td>
                <td>
                    <ngb-highlight [result]="track.albumTitle " [term]="paginateSortService.searchTerm"></ngb-highlight>
                </td>
                <td>{{ track.genres | join:', ' }}</td>
                <td>
                    <button
                        [active]="false"
                        [color]="'info'"
                        cButton
                        class="me-1"
                        variant="outline"
                    >
                        View
                    </button>
                </td>
            </tr>
            </tbody>
        </table>

        <p *ngIf="!trackList || !trackList.length" class="mt-3 center bg-light py-2">No data</p>

        <div class="d-flex justify-content-between p-2">
            <ngb-pagination [collectionSize]="(total$ | async)!" [(page)]="paginateSortService.page" [pageSize]="paginateSortService.pageSize">
            </ngb-pagination>

            <select class="form-select" style="width: auto" name="pageSize" [(ngModel)]="paginateSortService.pageSize">
                <option [ngValue]="5">5 items per page</option>
                <option [ngValue]="10">10 items per page</option>
                <option [ngValue]="15">15 items per page</option>
            </select>
        </div>

    </c-card-body>
</c-card>
